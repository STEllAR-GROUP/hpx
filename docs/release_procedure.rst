.. Copyright (c) 2007-2013 Louisiana State University

   Distributed under the Boost Software License, Version 1.0. (See accompanying
   file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

-------------------------
Release Procedure for HPX
-------------------------

Below is a step-wise procedure for making an HPX release.

This is a living document and may not be totally current or accurate.
It is an attempt to capture current practice in making an HPX release.
Please update it as appropriate.

One way to use this procedure is to print a copy and check off
the lines as they are completed to avoid confusion.

#.  Notify developers that a release is imminent. 

#.  Make a list of examples and benchmarks that should not go into the release.
    Build all examples and benchmarks that will go in the release and make sure
    they build and run as expected. 

    *   Make sure all examples and benchmarks have example input files, and
        usage documentation, either in the form of comments or a readme. 

#.  Send the list of examples and benchmarks that will be included in the
    release to gopx@cct.lsu.edu and stellar@cct.lsu.edu, and ask for feedback.
    Update the list as necessary.

#.  Write release notes for the blog to summarize the major changes listed in
    the log. The blog article should go in the "downloads" section. The url of
    the blog article should follow this format (where # are version numbers):::

        stellar.cct.lsu.edu/downloads/hpx-v#-#-#-release-notes

    Save the blog article as a draft. Place the release notes into a new section
    in ``docs/whats_new.qbk``.

#.  Build the docs, and proof-read them. Update any documentation that may have
    changed, and correct any typos.

    *   Pay particular attention to ``$HPX_SOURCE/README.rst`` and 
        ``docs/whats_new.qbk``.

#.  Delete the old release branch, and create a new one by branching a stable
    point from master. 

#.  Checkout the main branch, and bump the HPX version to the next release
    target. The following files contain version info:

        *   ``hpx/version.hpp``
        *   ``docs/hpx.qbk`` (Don't forget to update the logo)
        *   ``CMakeLists.txt``

#.  Checkout the release branch, and remove the ``-trunk`` tag from
    ``hpx/version.hpp`` (replace it with an empty string).

#.  Remove the examples and benchmarks that will not go into the release from
    the release branch.

#.  Tag a release candidate from the release branch.

#.  Notify gopx@cct.lsu.edu and stellar@cct.lsu.edu of the availability of the
    release candidate. Ask users to test the candidate by checking out the
    release candidate tag.

#.  Allow at least a week for testing of the release candidate. Pull in changes
    as needed from master to resolve bug fixes, etc.

    *   Use ``git merge`` when possible, and fall back to ``git cherry-pick``
        when needed.

#.  Tag the release.

#.  Roll a release candidate using ``tools/roll_release.sh``, and add the
    hashsums generated by the script to the "downloads" page of the website.

#.  Post the draft of the release notes.

.. URL format needed.
#.  Upload the packages and generated documentation to the website.

.. URL/title format needed.
#.  Write a new blog post announcing the release.

#.  Announce the release on gopx@cct.lsu.edu and stellar@cct.lsu.edu.

#.  Beer and pizza.

