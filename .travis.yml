language: cpp

compiler:
    - gcc
    - clang

branches:
    only:
        - travis

before_install:
    # more recent compilers
    - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
    # more recent cmake
    - sudo add-apt-repository -y ppa:kalakris/cmake
    # more recent boost
    - sudo add-apt-repository -y ppa:mapnik/boost
    - sudo apt-get update -qq
    - sudo apt-get install -qq cmake
    - sudo apt-get install -qq libboost-all-dev
    - export NUM_BUILDCORES=`grep -c ^processor /proc/cpuinfo`

script:
    - mkdir build
    - cd build
    - cmake .. -DCMAKE_BUILD_TYPE=Release -DHPX_MALLOC=jemalloc
    - echo ${NUM_BUILDCORES}

notifications:
    email: false
