# -*- coding: utf-8 -*-
#
# Copyright (c) 2018 Mikael Simberg
#
# Distributed under the Boost Software License, Version 1.0. (See accompanying
# file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
#
# HPX documentation build configuration file, created by
# sphinx-quickstart on Wed Feb 21 16:49:42 2018.
#
# This file is execfile()d with the current directory set to its
# containing dir.
#
# Note that not all possible configuration values are present in this
# autogenerated file.
#
# All configuration values have a default; values that are commented out
# serve to show the default.

import os
import subprocess
import sys

# If extensions (or modules to document with autodoc) are in another directory,
# add these directories to sys.path here. If the directory is relative to the
# documentation root, use os.path.abspath to make it absolute, like shown here.
#sys.path.insert(0, os.path.abspath('.'))

# -- General configuration ------------------------------------------------

# If your documentation needs a minimal Sphinx version, state it here.
#needs_sphinx = '1.0'

# Make our custom HPX extension visible.
sys.path.insert(0, os.path.abspath('.') + '/extensions')

# Add any Sphinx extension module names here, as strings. They can be
# extensions coming with Sphinx (named 'sphinx.ext.*') or your custom
# ones.
extensions = [
    'sphinx.ext.autodoc',
    'sphinx.ext.doctest',
    'sphinx.ext.intersphinx',
    'sphinx.ext.todo',
    'sphinx.ext.coverage',
    'sphinx.ext.mathjax',
    'sphinx.ext.ifconfig',
    'sphinx.ext.viewcode',
    'breathe',
    'sphinx-hpx', # Custom HPX roles
]

breathe_projects = { "hpx": "../hpx_autodoc" }
breathe_default_project = "hpx"

numfig = True
primary_domain = 'cpp'
highlight_language = 'cpp'

rst_prolog = ""

# General
rst_prolog += '''
.. |hpx| replace:: *HPX*
.. |hpx_compute| replace:: *HPX.Compute*
'''

# URLs
rst_prolog += '''
.. |stellar| replace:: STE||AR
.. _stellar: https://stellar-group.org
.. |stellar_list| replace:: hpx-users@stellar.cct.lsu.edu
.. _stellar_list: mailto:hpx-users@stellar.cct.lsu.edu
.. |stellar_irc| replace:: #ste||ar at Freenode
.. _stellar_irc: irc://irc.freenode.net:6667/#ste||ar
.. |cpplang_slack| replace:: Cpplang Slack
.. _cpplang_slack: https://cpplang.slack.com
.. |stellar_hpx_download| replace:: |hpx| Downloads
.. _stellar_hpx_download: https://stellar-group.org/downloads/
.. |hpx_github| replace:: Github
.. _hpx_github: https://github.com/STEllAR-GROUP/hpx/
.. |hpx_github_issues| replace:: |hpx| Issues
.. _hpx_github_issues: https://github.com/STEllAR-GROUP/hpx/issues
.. |hpx_stackoverflow| replace:: StackOverflow |hpx| questions
.. _hpx_stackoverflow: https://stackoverflow.com/questions/tagged/hpx>
.. |hpx_buildbot| replace:: |hpx| Buildbot Website
.. _hpx_buildbot: https://rostam.cct.lsu.edu/
.. |pycicle| replace:: pycicle
.. _pycicle: https://github.com/biddisco/pycicle/
.. |circleci| replace:: CircleCI
.. _circleci: https://circleci.com
.. |cdash| replace:: CDash
.. _cdash: https://www.kitware.com/cdash/project/about.html
.. |hpx_circleci| replace:: CircleCI HPX dashboard
.. _hpx_circleci: https://circleci.com/gh/STEllAR-GROUP/hpx
.. |hpx_cdash| replace:: CDash HPX dashboard
.. _hpx_cdash: https://cdash.cscs.ch/index.php?project=HPX
.. |support| replace:: Support Website
.. _support: https://stellar.cct.lsu.edu/support/

.. |hpxpi| replace:: HPXPI
.. _hpxpi: https://github.com/STEllAR-GROUP/hpxpi/
.. |xpi_spec| replace:: XPI specification
.. _xpi_spec: https://github.com/STEllAR-GROUP/hpxpi/blob/master/spec.pdf?raw=true
.. |hpxcl| replace:: HPXCL
.. _hpxcl: https://github.com/STEllAR-GROUP/hpxcl/

.. |lsu| replace:: Louisiana State University (LSU)
.. _lsu: https://www.lsu.edu
.. |cct| replace:: Center for Computation and Technology (CCT)
.. _cct: https://www.cct.lsu.edu
.. |iu| replace:: Indiana University (IU)
.. _iu: https://www.iu.edu
.. |crest| replace:: Center for Research in Extreme Scale Technologies (CREST)
.. _crest: https://pti.iu.edu
.. |fau| replace:: Friedrich-Alexander University Erlangen-Nuremberg (FAU)
.. _fau: https://www.fau.de
.. |inf3| replace:: Department of Computer Science 3 - Computer Architecture
.. _inf3: https://www3.cs.fau.de
.. |sandia| replace:: Sandia National Labs (Albuquerque)
.. _sandia: https://www.sandia.gov
.. |tue| replace:: Technische Universiteit Eindhoven
.. _tue: https://www.tui.nl
.. |nmsu| replace:: New Mexico State University
.. _nmsu: https://www.nmsu.edu
.. |unlv| replace:: University of Nevada, Las Vegas
.. _unlv: https://www.unlv.edu
.. |cscs| replace:: Swiss National Supercomputing Centre
.. _cscs: https://www.cscs.ch
.. |ou| replace:: University of Oregon
.. _ou: https://uoregon.edu/
.. |lbnl| replace:: Lawrence Berkeley National Laboratory (LBNL)
.. _lbnl: https://www.lbl.gov/
.. |nvidia| replace:: NVIDIA
.. _nvidia: https://nvidia.com/

.. |gsoc| replace:: Google Summer of Code
.. _gsoc: https://developers.google.com/open-source/soc/

.. |boost| replace:: Boost
.. _boost: https://www.boost.org/
.. |boost_libraries| replace:: Boost C++ Libraries
.. _boost_libraries: https://www.boost.org/
.. |boost_tools| replace:: Boost Tools
.. _boost_tools: https://www.boost.org/tools/index.html
.. |boost_quickbook| replace:: QuickBook
.. _boost_quickbook: https://www.boost.org/doc/libs/release/doc/html/quickbook.html
.. |boost_auto_index| replace:: AutoIndex
.. _boost_auto_index: https://www.boost.org/doc/libs/release/tools/auto_index/doc/html/index.html
.. |boost_getting_started| replace:: Getting Started
.. _boost_getting_started: https://www.boost.org/doc/libs/release/more/getting_started/index.html
.. |boost_doc| replace:: Boost Documentation
.. _boost_doc: https://www.boost.org/doc/
.. |boost_downloads| replace:: Boost Downloads
.. _boost_downloads: https://www.boost.org/users/download/
.. |boost_license| replace:: Boost Software License
.. _boost_license: https://www.boost.org/LICENSE_1_0.txt
.. |boost_wave| replace:: Boost Wave
.. _boost_wave: https://www.boost.org/doc/libs/release/libs/wave/doc/wave_driver.html

.. |boost_program_options| replace:: Boost.Program Options
.. _boost_program_options: https://www.boost.org/doc/html/program_options.html
.. |boost_atomic| replace:: Boost.Atomic
.. _boost_atomic: https://www.boost.org/doc/libs/release/doc/html/atomic.html
.. |boost_serialization| replace:: Boost.Serialization
.. _boost_serialization: https://www.boost.org/doc/libs/release/libs/serialization/doc/index.html

.. |hwloc_downloads| replace:: Hwloc Downloads
.. _hwloc_downloads: https://www.open-mpi.org/software/hwloc/v1.11
.. |hwloc_doc| replace:: Hwloc Documentation
.. _hwloc_doc: https://www.open-mpi.org/projects/hwloc/doc/

.. |doxygen| replace:: Doxygen
.. _doxygen: https://www.doxygen.org
.. |python| replace:: Python
.. _python: https://www.python.org
.. |sphinx| replace:: Sphinx
.. _sphinx: http://www.sphinx-doc.org
.. |breathe| replace:: Breathe
.. _breathe: https://breathe.readthedocs.io/en/latest

.. |macports| replace:: MacPorts
.. _macports: https://www.macports.org/

.. |apex| replace:: APEX
.. _apex: https://khuck.github.io/xpress-apex/
.. |apex_hpx_doc| replace:: APEX |hpx| documentation
.. _apex_hpx_doc: https://khuck.github.io/xpress-apex/usage/#hpx-louisiana-state-university
.. |tau| replace:: TAU
.. _tau: https://www.cs.uoregon.edu/research/tau/home.php
.. |cmake| replace:: CMake
.. _cmake: https://www.cmake.org
.. |ctest| replace:: CTest
.. _ctest: https://gitlab.kitware.com/cmake/community/wikis/doc/ctest/Testing-With-CTest
.. |ctest_doc| replace:: CTest Documentation
.. _ctest_doc: https://www.cmake.org/cmake/help/latest/manual/ctest.1.html
.. |cmake_download| replace:: CMake Downloads
.. _cmake_download: https://www.cmake.org/cmake/resources/software.html
.. |docker| replace:: Docker
.. _docker: https://www.docker.com
.. |docker_docs| replace:: Docker Documentation
.. _docker_docs: https://docs.docker.com/
.. |docker_docs_bind_mounts| replace:: Docker Documentation (Bind mounts)
.. _docker_docs_bind_mounts: https://docs.docker.com/storage/bind-mounts/
.. |docker_build_env| replace:: Docker Hub
.. _docker_build_env: https://hub.docker.com/r/stellargroup/build_env/
.. |gcc| replace:: GNU Compiler Collection (g++)
.. _gcc: https://gcc.gnu.org
.. |clang| replace:: clang: a C language family frontend for LLVM
.. _clang: https://clang.llvm.org/
.. |icpc| replace:: Intel Composer XE Suites
.. _icpc: https://software.intel.com/en-us/intel-composer-xe/
.. |gmake| replace:: GNU Make (gmake)
.. _gmake: https://www.gnu.org/software/make
.. |eglibc| replace:: Embedded GLIBC (EGLIBC)
.. _eglibc: https://eglibc.org/home
.. |glibc| replace:: GNU C Library (GLIBC)
.. _glibc: https://gnu.org/s/libc
.. |libstdcxx| replace:: GNU Standard C++ Library
.. _libstdcxx: https://gcc.gnu.org/libstdc++
.. |rnpl| replace:: RNPL
.. _rnpl: https://relativity.phys.lsu.edu/postdocs/matt/software.html
.. |google_perftools| replace:: google-perftools
.. _google_perftools: https://code.google.com/p/gperftools
.. |visual_cxx| replace:: Visual C++
.. _visual_cxx: https://msdn.microsoft.com/en-us/visualc/default.aspx
.. |jemalloc| replace:: jemalloc
.. _jemalloc: https://www.canonware.com/jemalloc
.. |libunwind| replace:: libunwind
.. _libunwind: https://www.nongnu.org/libunwind
.. |hdf5| replace:: Hierarchical Data Format V5 (HDF5)
.. _hdf5: https://www.hdfgroup.org/HDF5
.. |lorene| replace:: LORENE
.. _lorene: https://www.lorene.obspm.fr
.. |papi| replace:: Performance Application Programming Interface (PAPI)
.. _papi: https://icl.cs.utk.edu/papi/
.. |sodium| replace:: Networking and Cryptography library (NaCl)
.. _sodium: https://nacl.cr.yp.to/
.. |lapack| replace:: Linear Algebra PACKage (LAPACK)
.. _lapack: https://math-atlas.sourceforge.net/
.. |blas| replace:: Basic Linear Algebra Subroutines 3 (BLAS)
.. _blas: https://math-atlas.sourceforge.net/
.. |gsl| replace:: GNU Scientific Library (GSL)
.. _gsl: https://www.gnu.org/software/gsl/
.. |zlib| replace:: ZLib
.. _zlib: https://www.zlib.net/
.. |bzip2| replace:: BZip2
.. _bzip2: https://www.bzip.org/
.. |snappy| replace:: Snappy
.. _snappy: https://code.google.com/p/snappy/
.. |qsub| replace:: qsub
.. _qsub: https://www.clusterresources.com/torquedocs21/commands/qsub.shtml
.. |qstat| replace:: qstat
.. _qstat: https://www.clusterresources.com/torquedocs21/commands/qstat.shtml
.. |pbsdsh| replace:: pbsdsh
.. _pbsdsh: https://www.clusterresources.com/torquedocs21/commands/pbsdsh.shtml
.. _pgas: https://www.pgas.org/
.. _apgas: https://researcher.ibm.com/researcher/files/us-groved/amp2010.pdf
.. |slurm| replace:: SLURM
.. _slurm: https://slurm.net/
.. |srun| replace:: srun
.. _srun: https://slurm.schedmd.com/srun.html
.. |sbatch| replace:: sbatch
.. _sbatch: https://slurm.schedmd.com/sbatch.html
.. |linda| replace:: The Linda Coordination Language
.. _linda: https://en.wikipedia.org/wiki/Linda_(coordination_language)
.. |opencl| replace:: OpenCL
.. _opencl: https://www.khronos.org/opencl/
.. |openmpi| replace:: Open MPI
.. _openmpi: https://www.open-mpi.org
.. |pocl| replace:: POCL
.. _pocl: https://portablecl.org/
.. |cuda| replace:: CUDA
.. _cuda: https://www.nvidia.com/object/cuda_home_new.html
.. |nt2| replace:: NT2
.. _nt2: https://www.numscale.com/nt2/
.. |lgd| replace:: LibGeoDecomp
.. _lgd: https://www.libgeodecomp.org/
.. |conan| replace:: Conan
.. _conan: https://www.conan.io/
.. |boost_simd| replace:: Boost.SIMD
.. _boost_simd: https://github.com/NumScale/boost.simd
.. |vc| replace:: Vc Library
.. _vc: https://github.com/VcDevel/Vc

.. |cpp11| replace:: C++11 Standard
.. _cpp11: http://www.open-std.org/jtc1/sc22/wg21
.. |cpp17| replace:: C++17 Standard
.. _cpp17: http://www.open-std.org/jtc1/sc22/wg21
.. |cpp11_n3632| replace:: N3632
.. _cpp11_n3632: http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3632.html
.. |cpp11_n3634| replace:: N3857
.. _cpp11_n3634: http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3857.pdf
.. |cpp11_n3562| replace:: N3562
.. _cpp11_n3562: http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3562.pdf
.. |cpp11_n4088| replace:: N4411
.. _cpp11_n4088: http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4411.pdf
.. |cpp11_n4104| replace:: N4409
.. _cpp11_n4104: http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4409.pdf
.. |cpp11_n4107| replace:: N4313
.. _cpp11_n4107: http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4313.html
.. |cpp11_n4406| replace:: N4406
.. _cpp11_n4406: http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4406.pdf
.. |cpp17_n4399| replace:: N4399
.. _cpp17_n4399: http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4399.html
.. |cpp17_n4560| replace:: N4560
.. _cpp17_n4560: http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4560.pdf
.. |cpp20_p0075r1| replace:: P0075R1
.. _cpp20_p0075r1: http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0075r1.pdf
.. |cpp20_p0443| replace:: P0443
.. _cpp20_p0443: https://github.com/executors/issaquah_2016


.. |ini_file_format| replace:: Windows INI file format
.. _ini_file_format: https://en.wikipedia.org/wiki/INI_file

.. |hwloc| replace:: Portable Hardware Locality (HWLOC)
.. _hwloc: https://www.open-mpi.org/projects/hwloc/
.. |tbb| replace:: Intel Threading Building Blocks (TBB)
.. _tbb: https://www.threadingbuildingblocks.org/
.. |ppl| replace:: Microsoft Parallel Patterns Library (PPL)
.. _ppl: https://msdn.microsoft.com/en-us/library/dd492418.aspx
.. |cilk_pp| replace:: Cilk++
.. _cilk_pp: https://software.intel.com/en-us/articles/intel-cilk-plus/
.. |swarm| replace:: ETI SWift Adaptive Runtime Machine (SWARM)
.. _swarm: https://www.etinternational.com/index.php/products/swarmbeta/
.. |qthreads| replace:: Sandia National Labs Qthreads
.. _qthreads: https://www.cs.sandia.gov/qthreads/
.. |mpi| replace:: MPI
.. _mpi: https://en.wikipedia.org/wiki/Message_Passing_Interface
.. |openmp| replace:: OpenMP
.. _openmp: https://openmp.org/wp/
.. |charm_pp| replace:: Charm++
.. _charm_pp: https://charm.cs.uiuc.edu/
.. |pgas| replace:: PGAS
.. _pgas: https://www.pgas.org/
.. |chapel| replace:: Chapel
.. _chapel: https://chapel.cray.com/
.. |x10| replace:: X10
.. _x10: https://x10-lang.org/
.. |upc| replace:: UPC
.. _upc: https://upc.lbl.gov/
.. |fortress| replace:: Fortress
.. _fortress: https://labs.oracle.com/projects/plrg/Publications/index.html

.. |email_hkaiser| image:: /_static/images/emails/hkaiser.png
.. |email_theller| image:: /_static/images/emails/theller.png
.. |email_aberge| image:: /_static/images/emails/aberge.png
.. |email_msimberg| image:: /_static/images/emails/msimberg.png
.. |email_jbiddiscombe| image:: /_static/images/emails/biddisco.png
.. |email_abikineev| image:: /_static/images/emails/antbikineev.png
.. |email_mstumpf| image:: /_static/images/emails/martinhstumpf.png
.. |email_blelbach| image:: /_static/images/emails/blelbach.png
.. |email_syang| image:: /_static/images/emails/syang16.png
.. |email_jhabraken| image:: /_static/images/emails/vexocide.png
.. |email_sbrandt| image:: /_static/images/emails/sbrandt.png
.. |email_atrantan| image:: /_static/images/emails/atrantan.png
.. |email_aserio| image:: /_static/images/emails/aserio.png
.. |email_mbrodowicz| image:: /_static/images/emails/mbrodowicz.png
.. |email_vamatya| image:: /_static/images/emails/vamatya.png
'''

# Add any paths that contain templates here, relative to this directory.
templates_path = ['_templates']

# The suffix(es) of source filenames.
# You can specify multiple suffix as a list of string:
source_suffix = ['.rst']

# The encoding of source files.
source_encoding = 'utf-8-sig'

# The master toctree document.
master_doc = 'index'

# General information about the project.
project = u'HPX'
copyright = u'2008-2018, The Ste||ar Group'
author = u'The Ste||ar Group'

# The version info for the project you're documenting, acts as replacement for
# |version| and |release|, also used in various other places throughout the
# built documents.
#
# The short X.Y version.
version = u'@HPX_CONF_DOCUMENTATION_VERSION@'
# The full version, including alpha/beta/rc tags.
release = u'@HPX_CONF_DOCUMENTATION_VERSION@'

# The language for content autogenerated by Sphinx. Refer to documentation
# for a list of supported languages.
#
# This is also used if you do content translation via gettext catalogs.
# Usually you set "language" from the command line for these cases.
language = 'en'

# There are two options for replacing |today|: either, you set today to some
# non-false value, then it is used:
#today = ''
# Else, today_fmt is used as the format for a strftime call.
today_fmt = '%B %d, %Y'

# List of patterns, relative to source directory, that match files and
# directories to ignore when looking for source files.
exclude_patterns = []

# If true, '()' will be appended to :func: etc. cross-reference text.
add_function_parentheses = False

# If true, sectionauthor and moduleauthor directives will be shown in the
# output. They are ignored by default.
#show_authors = False

# The name of the Pygments (syntax highlighting) style to use.
pygments_style = 'sphinx'

# A list of ignored prefixes for module index sorting.
modindex_common_prefix = [ 'hpx' ]

# If true, `todo` and `todoList` produce output, else they produce nothing.
todo_include_todos = False


# -- Options for HTML output ----------------------------------------------

# The theme to use for HTML and HTML Help pages.  See the documentation for
# a list of builtin themes.
html_theme = 'sphinx_rtd_theme'

# Theme options are theme-specific and customize the look and feel of a theme
# further.  For a list of options available for each theme, see the
# documentation.
html_theme_options = {}

# The name of an image file (relative to this directory) to place at the top
# of the sidebar.
html_logo = '_static/images/HPX_STELLAR.png'

# Add any paths that contain custom static files (such as style sheets) here,
# relative to this directory. They are copied after the builtin static files,
# so a file named "default.css" will overwrite the builtin "default.css".
html_static_path = ['_static']
html_context = {
    'css_files': ['_static/css/theme_overrides.css'],
    'display_github': True,
    'github_user': 'STEllAR-GROUP',
    'github_repo': 'hpx',
    'github_version': 'master/docs/sphinx/',
}

if not ("@HPX_WITH_GIT_COMMIT_SHORT@" == ""):
    html_context['commit'] = "@HPX_WITH_GIT_COMMIT_SHORT@"

# Add any extra paths that contain custom files (such as robots.txt or
# .htaccess) here, relative to this directory. These files are copied
# directly to the root of the documentation.
html_extra_path = []

# If not '', a 'Last updated on:' timestamp is inserted at every page bottom,
# using the given strftime format.
html_last_updated_fmt = '%b %d, %Y'

# If true, SmartyPants will be used to convert quotes and dashes to
# typographically correct entities.
html_use_smartypants = True

# If false, no module index is generated.
html_domain_indices = True

# If false, no index is generated.
html_use_index = True

# If true, the index is split into individual pages for each letter.
html_split_index = True

# If true, links to the reST sources are added to the pages.
html_show_sourcelink = False

# If true, "Created using Sphinx" is shown in the HTML footer. Default is True.
html_show_sphinx = True

# If true, "(C) Copyright ..." is shown in the HTML footer. Default is True.
html_show_copyright = True

# Language to be used for generating the HTML full-text search index.
# Sphinx supports the following languages:
#   'da', 'de', 'en', 'es', 'fi', 'fr', 'hu', 'it', 'ja'
#   'nl', 'no', 'pt', 'ro', 'ru', 'sv', 'tr'
html_search_language = 'en'

# Output file base name for HTML help builder.
htmlhelp_basename = 'HPXdoc'

# -- Options for LaTeX output ---------------------------------------------

latex_elements = {}

# Grouping the document tree into LaTeX files. List of tuples
# (source start file, target name, title,
#  author, documentclass [howto, manual, or own class]).
latex_documents = [
    (master_doc, 'HPX.tex', u'HPX Documentation',
     u'The Ste\\textbar{}\\textbar{}ar Group', 'manual'),
]


# -- Options for manual page output ---------------------------------------

# One entry per manual page. List of tuples
# (source start file, name, description, authors, manual section).
man_pages = [
    (master_doc, 'hpx', u'HPX Documentation',
     [author], 1)
]


# -- Options for Texinfo output -------------------------------------------

# Grouping the document tree into Texinfo files. List of tuples
# (source start file, target name, title, author,
#  dir menu entry, description, category)
texinfo_documents = [
    (master_doc, 'HPX', u'HPX Documentation',
     author, 'HPX', 'The C++ Standard Library for Parallelism and Concurrency.',
     'Miscellaneous'),
]


# -- Options for Epub output ----------------------------------------------

# Bibliographic Dublin Core info.
epub_title = project
epub_author = author
epub_publisher = author
epub_copyright = copyright
